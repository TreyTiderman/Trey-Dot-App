import{S as ie,i as ce,s as fe,I as le,e as F,t as I,a as T,c as q,b as L,d as h,f as W,g as p,m as C,l as te,h as R,j as P,k as O,n as z,o as E,G as ue,E as ge,u as be,v as me,w as de,p as re,q as _e,x as $}from"./index.c4c2aa46.js";import{L as ve}from"./Loading.21d11dd1.js";/* empty css                                              */function he(e){var G,M,H,J,K,Q;let l,c,u,v,i,o,f,b,m=(e[0]?(G=e[2].activeLabel)!=null?G:e[2].label:(M=e[2].label)!=null?M:"")+"",g,n,r,d,w,a=(e[0]?(J=e[3].label)!=null?J:"":(H=e[3].activeLabel)!=null?H:e[3].label)+"",B,s,k,A;return f=new le({props:{name:(K=e[2].icon)!=null?K:"",size:"2"}}),d=new le({props:{name:(Q=e[3].icon)!=null?Q:"",size:"2"}}),{c(){var t,_,D,N,S,j;l=F("div"),c=F("h6"),u=I(e[1]),v=T(),i=F("span"),o=F("button"),q(f.$$.fragment),b=T(),g=I(m),n=T(),r=F("button"),q(d.$$.fragment),w=T(),B=I(a),L(c,"class","svelte-bjvmk6"),h(o,"border-color",e[0]?`var(--color-bg-${(t=e[2].color)!=null?t:"green"})`:""),h(o,"background-color",e[0]?`var(--color-bg-${(_=e[2].color)!=null?_:"green"})`:""),h(o,"color",e[0]?`var(--color-text-${(D=e[2].color)!=null?D:"green"})`:""),L(o,"class","svelte-bjvmk6"),h(r,"border-color",e[0]?"":`var(--color-bg-${(N=e[3].color)!=null?N:"red"})`),h(r,"background-color",e[0]?"":`var(--color-bg-${(S=e[3].color)!=null?S:"red"})`),h(r,"color",e[0]?"":`var(--color-text-${(j=e[3].color)!=null?j:"red"})`),L(r,"class","svelte-bjvmk6"),L(i,"class","svelte-bjvmk6"),L(l,"class","svelte-bjvmk6")},m(t,_){W(t,l,_),p(l,c),p(c,u),p(l,v),p(l,i),p(i,o),C(f,o,null),p(o,b),p(o,g),p(i,n),p(i,r),C(d,r,null),p(r,w),p(r,B),s=!0,k||(A=[te(o,"click",e[5]),te(r,"click",e[6])],k=!0)},p(t,[_]){var S,j,U,V,X,Y,Z,y,x,ee,oe,ne;(!s||_&2)&&R(u,t[1]);const D={};_&4&&(D.name=(S=t[2].icon)!=null?S:""),f.$set(D),(!s||_&5)&&m!==(m=(t[0]?(j=t[2].activeLabel)!=null?j:t[2].label:(U=t[2].label)!=null?U:"")+"")&&R(g,m),(!s||_&5)&&h(o,"border-color",t[0]?`var(--color-bg-${(V=t[2].color)!=null?V:"green"})`:""),(!s||_&5)&&h(o,"background-color",t[0]?`var(--color-bg-${(X=t[2].color)!=null?X:"green"})`:""),(!s||_&5)&&h(o,"color",t[0]?`var(--color-text-${(Y=t[2].color)!=null?Y:"green"})`:"");const N={};_&8&&(N.name=(Z=t[3].icon)!=null?Z:""),d.$set(N),(!s||_&9)&&a!==(a=(t[0]?(x=t[3].label)!=null?x:"":(y=t[3].activeLabel)!=null?y:t[3].label)+"")&&R(B,a),(!s||_&9)&&h(r,"border-color",t[0]?"":`var(--color-bg-${(ee=t[3].color)!=null?ee:"red"})`),(!s||_&9)&&h(r,"background-color",t[0]?"":`var(--color-bg-${(oe=t[3].color)!=null?oe:"red"})`),(!s||_&9)&&h(r,"color",t[0]?"":`var(--color-text-${(ne=t[3].color)!=null?ne:"red"})`)},i(t){s||(P(f.$$.fragment,t),P(d.$$.fragment,t),s=!0)},o(t){O(f.$$.fragment,t),O(d.$$.fragment,t),s=!1},d(t){t&&z(l),E(f),E(d),k=!1,ue(A)}}}function pe(e,l,c){let{state:u=!1}=l,{name:v="Toggle"}=l,{onButton:i={icon:"circle",label:"ON",activeLabel:"ON",color:"green"}}=l,{offButton:o={icon:"square",label:"OFF",activeLabel:"OFF",color:"red"}}=l;const f=ge(),b=()=>f("onPress"),m=()=>f("offPress");return e.$$set=g=>{"state"in g&&c(0,u=g.state),"name"in g&&c(1,v=g.name),"onButton"in g&&c(2,i=g.onButton),"offButton"in g&&c(3,o=g.offButton)},[u,v,i,o,f,b,m]}class Be extends ie{constructor(l){super(),ce(this,l,pe,he,fe,{state:0,name:1,onButton:2,offButton:3})}}function ae(e,l,c){const u=e.slice();return u[11]=l[c],u}function se(e){var i,o;let l,c;function u(){return e[9](e[11])}function v(){return e[10](e[11])}return l=new Be({props:{state:e[11].state,name:e[3]?`${e[11].name} [${e[11].id}]`:e[11].name,onButton:(i=e[11].onButton)!=null?i:{icon:"",label:"ON",activeLabel:"ON",color:"green"},offButton:(o=e[11].offButton)!=null?o:{icon:"",label:"OFF",activeLabel:"OFF",color:"red"}}}),l.$on("onPress",u),l.$on("offPress",v),{c(){q(l.$$.fragment)},m(f,b){C(l,f,b),c=!0},p(f,b){var g,n;e=f;const m={};b&1&&(m.state=e[11].state),b&1&&(m.name=e[3]?`${e[11].name} [${e[11].id}]`:e[11].name),b&1&&(m.onButton=(g=e[11].onButton)!=null?g:{icon:"",label:"ON",activeLabel:"ON",color:"green"}),b&1&&(m.offButton=(n=e[11].offButton)!=null?n:{icon:"",label:"OFF",activeLabel:"OFF",color:"red"}),l.$set(m)},i(f){c||(P(l.$$.fragment,f),c=!0)},o(f){O(l.$$.fragment,f),c=!1},d(f){E(l,f)}}}function we(e){var b,m,g;let l,c,u,v;l=new ve({props:{show:!((b=e[2].subscriptions[e[7]])!=null&&b.ready)&&((g=(m=e[1].config)==null?void 0:m.server)==null?void 0:g.online)}});let i=e[0],o=[];for(let n=0;n<i.length;n+=1)o[n]=se(ae(e,i,n));const f=n=>O(o[n],1,1,()=>{o[n]=null});return{c(){var n;q(l.$$.fragment),c=T(),u=F("section");for(let r=0;r<o.length;r+=1)o[r].c();h(u,"grid-template-columns","repeat(auto-fit, minmax(min("+((n=e[4])!=null?n:"200px")+", 100%), .4fr))"),L(u,"class","svelte-i27yym")},m(n,r){C(l,n,r),W(n,c,r),W(n,u,r);for(let d=0;d<o.length;d+=1)o[d].m(u,null);v=!0},p(n,[r]){var w,a,B;const d={};if(r&6&&(d.show=!((w=n[2].subscriptions[n[7]])!=null&&w.ready)&&((B=(a=n[1].config)==null?void 0:a.server)==null?void 0:B.online)),l.$set(d),r&105){i=n[0];let s;for(s=0;s<i.length;s+=1){const k=ae(n,i,s);o[s]?(o[s].p(k,r),P(o[s],1)):(o[s]=se(k),o[s].c(),P(o[s],1),o[s].m(u,null))}for(be(),s=i.length;s<o.length;s+=1)f(s);me()}},i(n){if(!v){P(l.$$.fragment,n);for(let r=0;r<i.length;r+=1)P(o[r]);v=!0}},o(n){O(l.$$.fragment,n),o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)O(o[r]);v=!1},d(n){E(l,n),n&&z(c),n&&z(u),de(o,n)}}}function Pe(e,l,c){var w;let u,v;re(e,_e,a=>c(1,u=a)),re(e,$,a=>c(2,v=a));let{config:i={name:"Device Power",file:"TogglePage",cardWidth:"500px",toggles:[{id:1,name:"Display"},{id:2,name:"Audio Recorder",state:!1,onButton:{icon:"circle",label:"Record",activeLabel:"Recording",color:"red"},offButton:{icon:"square",label:"Stop",activeLabel:"Stopped",color:"grey"}}]}}=l,o=u.url.search.edit==="true",f=i.cardWidth,b=i.toggles;function m(a){a.state=!0,$.debug(`Device id ${a.id} "${a.name}" was powered ON`),$.digitalPulse(n,a.id*2-1),c(0,b)}function g(a){a.state=!1,$.debug(`Device id ${a.id} "${a.name}" was powered OFF`),$.digitalPulse(n,a.id*2),c(0,b)}let n=(w=i.simplSubscriptionID)!=null?w:i.file;$.addSubscription(n,a=>{b.forEach(B=>{B.state=a.digital[B.id]}),c(0,b)});const r=a=>m(a),d=a=>g(a);return e.$$set=a=>{"config"in a&&c(8,i=a.config)},e.$$.update=()=>{e.$$.dirty&256&&console.log("DevicePowerPage config",i)},[b,u,v,o,f,m,g,n,i,r,d]}class Le extends ie{constructor(l){super(),ce(this,l,Pe,we,fe,{config:8})}}export{Le as default};
