import{S as _,i as h,s as y,e as c,b as n,f as u,B as f,n as d,p as v,q as k,Q as w,K as p,O as g}from"./index.c4c2aa46.js";function S(s){let e,r;return{c(){e=c("video"),n(e,"nocontrols",""),e.autoplay="autoplay",n(e,"xloop","loop"),e.muted=!0,n(e,"defaultmuted",""),e.playsInline=!0,n(e,"preload","auto"),n(e,"style",r=(s[3].screen.portrait?"width: 100%;":"height: 100%;")+" background-color: black; border-radius: var(--radius-2);"),n(e,"class","svelte-1dyn9b3")},m(a,t){u(a,e,t),s[5](e)},p(a,t){t&8&&r!==(r=(a[3].screen.portrait?"width: 100%;":"height: 100%;")+" background-color: black; border-radius: var(--radius-2);")&&n(e,"style",r)},d(a){a&&d(e),s[5](null)}}}function P(s){let e,r;return{c(){e=c("canvas"),n(e,"style",r=(s[3].screen.portrait?"width: 100%;":"height: 100%;")+" background-color: black; border-radius: var(--radius-2);"),n(e,"class","svelte-1dyn9b3")},m(a,t){u(a,e,t),s[4](e)},p(a,t){t&8&&r!==(r=(a[3].screen.portrait?"width: 100%;":"height: 100%;")+" background-color: black; border-radius: var(--radius-2);")&&n(e,"style",r)},d(a){a&&d(e),s[4](null)}}}function j(s){let e,r,a;return{c(){e=c("img"),g(e.src,r=s[0].mjpeg)||n(e,"src",r),n(e,"alt","mjpeg stream"),n(e,"nocontrols",""),n(e,"style",a=(s[3].screen.portrait?"width: 100%;":"height: 100%;")+" background-color: black; border-radius: var(--radius-2);"),n(e,"class","svelte-1dyn9b3")},m(t,l){u(t,e,l)},p(t,l){l&1&&!g(e.src,r=t[0].mjpeg)&&n(e,"src",r),l&8&&a!==(a=(t[3].screen.portrait?"width: 100%;":"height: 100%;")+" background-color: black; border-radius: var(--radius-2);")&&n(e,"style",a)},d(t){t&&d(e)}}}function E(s){let e;function r(l,o){if(l[0].mjpeg)return j;if(l[0].ws)return P;if(l[0].hls)return S}let a=r(s),t=a&&a(s);return{c(){e=c("section"),t&&t.c(),n(e,"class","svelte-1dyn9b3")},m(l,o){u(l,e,o),t&&t.m(e,null)},p(l,[o]){a===(a=r(l))&&t?t.p(l,o):(t&&t.d(1),t=a&&a(l),t&&(t.c(),t.m(e,null)))},i:f,o:f,d(l){l&&d(e),t&&t.d()}}}function M(s,e){return new JSMpeg.Player(s,{canvas:e})}function q(s,e){const r=e;if(Hls.isSupported()){const a=new Hls;a.loadSource(s),a.attachMedia(r),a.on(Hls.Events.MANIFEST_PARSED,()=>{r.play()})}else r.canPlayType("application/vnd.apple.mpegurl")&&(r.src=s,r.addEventListener("loadedmetadata",()=>{r.play()}))}function H(s,e,r){let a;v(s,k,i=>r(3,a=i));let{config:t={name:"Stream",file:"StreamPage",mjpeg:"http://192.168.1.21/cgi-bin/mjpg/video.cgi?channel=0&subtype=1",hls:"http://192.168.1.1:19000/memfs/a22dfe17-c714-459e-b2d5-7c252093d445.m3u8",ws:"ws://192.168.1.1:9999"}}=e,l,o;w(()=>{t.ws?M(t.ws,l):t.hls&&q(t.hls,o)});function b(i){p[i?"unshift":"push"](()=>{l=i,r(1,l)})}function m(i){p[i?"unshift":"push"](()=>{o=i,r(2,o)})}return s.$$set=i=>{"config"in i&&r(0,t=i.config)},s.$$.update=()=>{s.$$.dirty&1&&console.log("config",t)},[t,l,o,a,b,m]}class I extends _{constructor(e){super(),h(this,e,H,E,y,{config:0})}}export{I as default};
