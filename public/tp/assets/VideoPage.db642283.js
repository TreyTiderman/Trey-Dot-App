import{S as ae,i as ue,s as oe,c as W,a as C,e as I,b as B,d as F,D as j,m as G,f as A,g as h,j as w,u as M,v as U,k as $,o as J,n as E,w as se,p as Z,x as V,q as re,I as K,t as T,l as Q,N as ce,B as de,h as q,C as fe}from"./index.c4c2aa46.js";import{L as pe}from"./Loading.21d11dd1.js";/* empty css                                              */function x(e,t,i){const a=e.slice();return a[20]=t[i],a}function ee(e,t,i){const a=e.slice();return a[23]=t[i],a}function te(e){let t,i,a,r=e[23].name+"",u,d,n=e[7]?`[${e[23].id}]`:"",y,l,o,f,c;i=new K({props:{name:e[23].icon,size:X}});function S(){return e[17](e[23])}return{c(){var p;t=I("button"),W(i.$$.fragment),a=C(),u=T(r),d=C(),y=T(n),l=C(),B(t,"class","svelte-y6ia7u"),j(t,"selected",((p=e[3])==null?void 0:p.id)===e[23].id)},m(p,v){A(p,t,v),G(i,t,null),h(t,a),h(t,u),h(t,d),h(t,y),h(t,l),o=!0,f||(c=Q(t,"click",S),f=!0)},p(p,v){var g;e=p,v&520&&j(t,"selected",((g=e[3])==null?void 0:g.id)===e[23].id)},i(p){o||(w(i.$$.fragment,p),o=!0)},o(p){$(i.$$.fragment,p),o=!1},d(p){p&&E(t),J(i),f=!1,c()}}}function ne(e){let t,i,a,r,u,d=e[2],n=[];for(let l=0;l<d.length;l+=1)n[l]=le(x(e,d,l));const y=l=>$(n[l],1,1,()=>{n[l]=null});return{c(){t=I("div"),i=I("h4"),i.textContent=`${e[11]}`,a=C(),r=I("div");for(let l=0;l<n.length;l+=1)n[l].c();B(r,"class","outputList svelte-y6ia7u"),F(r,"grid-template-columns","repeat("+e[4]+", 1fr)"),B(t,"class","colunm svelte-y6ia7u")},m(l,o){A(l,t,o),h(t,i),h(t,a),h(t,r);for(let f=0;f<n.length;f+=1)n[f].m(r,null);u=!0},p(l,o){if(o&8324){d=l[2];let f;for(f=0;f<d.length;f+=1){const c=x(l,d,f);n[f]?(n[f].p(c,o),w(n[f],1)):(n[f]=le(c),n[f].c(),w(n[f],1),n[f].m(r,null))}for(M(),f=d.length;f<n.length;f+=1)y(f);U()}(!u||o&16)&&F(r,"grid-template-columns","repeat("+l[4]+", 1fr)")},i(l){if(!u){for(let o=0;o<d.length;o+=1)w(n[o]);u=!0}},o(l){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)$(n[o]);u=!1},d(l){l&&E(t),se(n,l)}}}function ie(e){var s,m;let t,i,a=e[20].name+"",r,u,d=e[7]?`[${e[20].id}]`:"",n,y,l,o,f,c=((s=e[20].input)==null?void 0:s.name)+"",S,p,v,g,L;o=new K({props:{name:(m=e[20].input)==null?void 0:m.icon,size:X}});function z(){return e[18](e[20])}return{c(){t=I("button"),i=I("span"),r=T(a),u=C(),n=T(d),y=C(),l=I("div"),W(o.$$.fragment),f=C(),S=T(c),p=C(),B(l,"class","svelte-y6ia7u"),B(t,"class","tv svelte-y6ia7u")},m(k,D){A(k,t,D),h(t,i),h(i,r),h(i,u),h(i,n),h(t,y),h(t,l),G(o,l,null),h(l,f),h(l,S),h(t,p),v=!0,g||(L=Q(t,"click",z),g=!0)},p(k,D){var O,b;e=k,(!v||D&4)&&a!==(a=e[20].name+"")&&q(r,a),(!v||D&4)&&d!==(d=e[7]?`[${e[20].id}]`:"")&&q(n,d);const R={};D&4&&(R.name=(O=e[20].input)==null?void 0:O.icon),o.$set(R),(!v||D&4)&&c!==(c=((b=e[20].input)==null?void 0:b.name)+"")&&q(S,c)},i(k){v||(w(o.$$.fragment,k),v=!0)},o(k){$(o.$$.fragment,k),v=!1},d(k){k&&E(t),J(o),g=!1,L()}}}function le(e){let t=e[20],i,a,r=ie(e);return{c(){r.c(),i=ce()},m(u,d){r.m(u,d),A(u,i,d),a=!0},p(u,d){d&4&&oe(t,t=u[20])?(M(),$(r,1,1,de),U(),r=ie(u),r.c(),w(r,1),r.m(i.parentNode,i)):r.p(u,d)},i(u){a||(w(r),a=!0)},o(u){$(r),a=!1},d(u){u&&E(i),r.d(u)}}}function me(e){let t,i=e[0]?"Simple":"Advanced",a,r,u,d,n,y;return u=new K({props:{name:"display_settings",size:X}}),{c(){t=I("button"),a=T(i),r=C(),W(u.$$.fragment),B(t,"class","extraButton svelte-y6ia7u")},m(l,o){A(l,t,o),h(t,a),h(t,r),G(u,t,null),d=!0,n||(y=Q(t,"click",e[14]),n=!0)},p(l,o){(!d||o&1)&&i!==(i=l[0]?"Simple":"Advanced")&&q(a,i)},i(l){d||(w(u.$$.fragment,l),d=!0)},o(l){$(u.$$.fragment,l),d=!1},d(l){l&&E(t),J(u),n=!1,y()}}}function ge(e){var g,L,z;let t,i,a,r,u,d,n,y,l,o;t=new pe({props:{show:!((g=e[6].subscriptions[e[15]])!=null&&g.ready)&&((z=(L=e[1].config)==null?void 0:L.server)==null?void 0:z.online)}});let f=e[9],c=[];for(let s=0;s<f.length;s+=1)c[s]=te(ee(e,f,s));const S=s=>$(c[s],1,1,()=>{c[s]=null});let p=e[0]&&ne(e),v=e[8]&&me(e);return{c(){W(t.$$.fragment),i=C(),a=I("section"),r=I("div"),u=I("h4"),u.textContent=`${e[10]}`,d=C(),n=I("div");for(let s=0;s<c.length;s+=1)c[s].c();y=C(),p&&p.c(),l=C(),v&&v.c(),B(n,"class","inputList svelte-y6ia7u"),F(n,"grid-template-columns","repeat("+e[5]+", 1fr)"),B(r,"class","colunm svelte-y6ia7u"),B(a,"class","svelte-y6ia7u"),j(a,"advancedSection",e[0])},m(s,m){G(t,s,m),A(s,i,m),A(s,a,m),h(a,r),h(r,u),h(r,d),h(r,n);for(let k=0;k<c.length;k+=1)c[k].m(n,null);h(a,y),p&&p.m(a,null),h(a,l),v&&v.m(a,null),o=!0},p(s,[m]){var D,R,O;const k={};if(m&66&&(k.show=!((D=s[6].subscriptions[s[15]])!=null&&D.ready)&&((O=(R=s[1].config)==null?void 0:R.server)==null?void 0:O.online)),t.$set(k),m&4744){f=s[9];let b;for(b=0;b<f.length;b+=1){const _=ee(s,f,b);c[b]?(c[b].p(_,m),w(c[b],1)):(c[b]=te(_),c[b].c(),w(c[b],1),c[b].m(n,null))}for(M(),b=f.length;b<c.length;b+=1)S(b);U()}(!o||m&32)&&F(n,"grid-template-columns","repeat("+s[5]+", 1fr)"),s[0]?p?(p.p(s,m),m&1&&w(p,1)):(p=ne(s),p.c(),w(p,1),p.m(a,l)):p&&(M(),$(p,1,1,()=>{p=null}),U()),s[8]&&v.p(s,m),m&1&&j(a,"advancedSection",s[0])},i(s){if(!o){w(t.$$.fragment,s);for(let m=0;m<f.length;m+=1)w(c[m]);w(p),w(v),o=!0}},o(s){$(t.$$.fragment,s),c=c.filter(Boolean);for(let m=0;m<c.length;m+=1)$(c[m]);$(p),$(v),o=!1},d(s){J(t,s),s&&E(i),s&&E(a),se(c,s),p&&p.d(),v&&v.d()}}}const X=2;function _e(e,t,i){var R,O,b;let a,r,u,d;Z(e,V,_=>i(6,u=_)),Z(e,re,_=>i(1,d=_));let{config:n={name:"Video",file:"VideoPage",simplSubscriptionID:"VideoPage",advancedOption:!0,advancedRouting:!0,inputColumns:1,outputColumns:3,inputs:[{id:3,name:"Room PC",icon:"computer"},{id:5,name:"Wireless",icon:"cast"},{id:1,name:"Laptop Front",icon:"settings_input_hdmi"},{id:2,name:"Laptop Back",icon:"settings_input_hdmi"},{id:4,name:"Apple TV",icon:"Cast"},{id:6,name:"VCR",icon:"settings_input_component"},{id:0,name:"Blank",icon:"close"}],outputs:[{id:1,name:"Display 1"},{id:2,name:"Display 2"},{id:3,name:"Display 3"},{id:4,name:"Display 4"},{id:5,name:"Display 5"},{id:6,name:"Display 6"},{id:7,name:"Display 7"},{id:8,name:"Display 8"},{id:9,name:"Display 9"}]}}=t;const y={id:999,name:"Fake Input",icon:"error"};let l=d.url.search.edit==="true",o=n.advancedRouting,f=n.advancedOption,c=n.inputs,S=n.outputs,p=(R=n.inputHeading)!=null?R:"Select source...",v=(O=n.outputHeading)!=null?O:"Then destination...",g=c[0];S.forEach(_=>_.input=g);function L(_){i(3,g=_),o?(V.debug(`Input id ${g.id} "${g.name}" was pressed`),V.digitalPulse(m,g.id)):(V.debug(`Input id ${g.id} "${g.name}" was pressed and routed to all displays`),V.digitalPulse(m,g.id),S.forEach(P=>{P.input=g,V.analog(m,P.id,g.id)}))}function z(_){_.input=g,V.debug(`Input id ${g.id} "${g.name}" was routed to Output id ${_.id} "${_.name}"`),V.analog(m,_.id,g.id),i(2,S)}function s(){i(0,o=!o),o&&g===y&&i(3,g=c[0]),u.subscriptions[m]&&fe(V,u.subscriptions[m].forceUpdate=!0,u)}let m=(b=n.simplSubscriptionID)!=null?b:n.file;V.addSubscription(m,_=>{if(S.forEach(P=>{let N=c.find(H=>H.id===_.analog[P.id]);N||(N=y,N.name="No input at id "+_.analog[P.id]),P.input!==N&&(P.input=N)}),!o){let P=S[0].input.id;S.every(H=>{var Y;return P===((Y=H==null?void 0:H.input)==null?void 0:Y.id)})?i(3,g=c.find(H=>H.id===P)):i(3,g=y)}i(2,S)});const k=_=>L(_),D=_=>z(_);return e.$$set=_=>{"config"in _&&i(16,n=_.config)},e.$$.update=()=>{e.$$.dirty&65538&&i(5,a=d.screen.width>550?n.inputColumns||"auto":1),e.$$.dirty&65538&&i(4,r=d.screen.width>550?n.outputColumns||"auto":1),e.$$.dirty&65536&&console.log("config",n),e.$$.dirty&1&&console.log("advancedRouting",o)},[o,d,S,g,r,a,u,l,f,c,p,v,L,z,s,m,n,k,D]}class ke extends ae{constructor(t){super(),ue(this,t,_e,ge,oe,{config:16})}}export{ke as default};
